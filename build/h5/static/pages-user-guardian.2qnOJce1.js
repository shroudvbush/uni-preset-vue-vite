import{_ as e,c as a,w as s,d as t,h as n,C as i,a as d,A as o,s as l,B as u,i as c,r,o as h,e as b,j as m,k as f,I as p,q as _,t as g,D as k}from"./js/index.DbooXYOL.js";import{P as N}from"./PageHeader.TnuYEyYk.js";const P=e({components:{PageHeader:N},data:()=>({phoneNumber:"",maskedPhoneNumber:"",isBound:!1,isDataShareEnabled:!1}),computed:{isValidPhone(){return/^1\d{10}$/.test(this.phoneNumber)}},onLoad(){const e=u("boundGuardian");if(e){const a=JSON.parse(e);this.maskedPhoneNumber=a.maskedPhone,this.isBound=!0,this.isDataShareEnabled=a.isDataShareEnabled||!1}},methods:{toggleDataShare(e){if(this.isDataShareEnabled=e.detail.value,this.isBound){const e=u("boundGuardian");if(e){const a=JSON.parse(e);a.isDataShareEnabled=this.isDataShareEnabled,l("boundGuardian",JSON.stringify(a))}}},maskPhoneNumber:e=>e&&11===e.length?e.substring(0,3)+"****"+e.substring(7):"",bindGuardian(){this.isValidPhone?(t({title:"绑定中..."}),setTimeout((()=>{n();const e=this.maskPhoneNumber(this.phoneNumber),a={phone:this.phoneNumber,maskedPhone:e,isDataShareEnabled:this.isDataShareEnabled,bindTime:(new Date).getTime()};l("boundGuardian",JSON.stringify(a)),this.maskedPhoneNumber=e,this.isBound=!0,d({title:"绑定成功",icon:"success"})}),1500)):d({title:"请输入正确的手机号",icon:"none"})},showUnbindConfirm(){o({title:"提示",content:"确定要解除监护人绑定吗？",success:e=>{e.confirm&&this.unbindGuardian()}})},unbindGuardian(){t({title:"解绑中..."}),setTimeout((()=>{n(),i("boundGuardian"),this.phoneNumber="",this.maskedPhoneNumber="",this.isBound=!1,d({title:"已解除绑定",icon:"success"})}),1e3)}}},[["render",function(e,t,n,i,d,o){const l=r("page-header"),u=m,N=p,P=c,S=_,D=k;return h(),a(P,{class:"container"},{default:s((()=>[b(l,{title:"监护人绑定"}),b(P,{class:"content"},{default:s((()=>[d.isBound?(h(),a(P,{key:1},{default:s((()=>[b(P,{class:"bound-info"},{default:s((()=>[b(u,{class:"bound-title"},{default:s((()=>[f("※已绑定监护人")])),_:1}),b(P,{class:"bound-phone"},{default:s((()=>[b(u,{class:"phone-text"},{default:s((()=>[f(g(d.maskedPhoneNumber),1)])),_:1}),b(P,{class:"delete-icon",onClick:o.showUnbindConfirm},{default:s((()=>[f("✕")])),_:1},8,["onClick"])])),_:1})])),_:1}),b(P,{class:"description"},{default:s((()=>[b(u,{class:"desc-text"},{default:s((()=>[f("说明：完成与监护人绑定后，便可以使用监护人紧急呼叫功能。")])),_:1})])),_:1})])),_:1})):(h(),a(P,{key:0},{default:s((()=>[b(P,{class:"section"},{default:s((()=>[b(u,{class:"label"},{default:s((()=>[f("监护人联系方式")])),_:1}),b(N,{class:"input-field",type:"number",placeholder:"请输入监护人手机号",modelValue:d.phoneNumber,"onUpdate:modelValue":t[0]||(t[0]=e=>d.phoneNumber=e),maxlength:"11"},null,8,["modelValue"])])),_:1}),b(P,{class:"action-button-area"},{default:s((()=>[b(S,{class:"bind-button",onClick:o.bindGuardian,disabled:!o.isValidPhone},{default:s((()=>[f("绑定")])),_:1},8,["onClick","disabled"])])),_:1}),b(P,{class:"description"},{default:s((()=>[b(u,{class:"desc-text"},{default:s((()=>[f("说明：完成与监护人绑定后，便可以使用监护人视频通话功能。")])),_:1})])),_:1})])),_:1})),b(P,{class:"toggle-section"},{default:s((()=>[b(u,{class:"toggle-label"},{default:s((()=>[f("健康数据共享")])),_:1}),b(D,{checked:d.isDataShareEnabled,onChange:o.toggleDataShare,color:"#6C63FF",class:"toggle-switch"},null,8,["checked","onChange"])])),_:1}),b(P,{class:"description"},{default:s((()=>[b(u,{class:"desc-text"},{default:s((()=>[f("说明：开启健康数据共享功能仅是在每次健康数据更新时提供给监护人，无论开关与否均可在健康数据异常、触发跌倒检测时第一时间通知监护人（已经绑定监护人时生效）")])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-1147e91f"]]);export{P as default};
