import{_ as e,c as a,w as t,A as l,d as s,a as n,x as r,h as d,n as m,i as o,r as i,o as c,e as h,j as f,k as u,t as b,f as _,m as g,D as I,q as p}from"./js/index.DbooXYOL.js";import{P as v}from"./PageHeader.TnuYEyYk.js";import{d as y,s as k}from"./family.XecCmL23.js";import"./request.DRycooUd.js";const C=e({components:{PageHeader:v},data:()=>({memberId:"",memberInfo:{},healthData:{},loading:!1}),onLoad(e){e.id&&(this.memberId=e.id,this.loadMemberInfo())},methods:{async loadMemberInfo(){this.loading=!0;try{this.memberInfo={id:this.memberId,name:"张三",relationship:"父亲",phoneNumber:"13800138000",gender:"男",age:"55",birthday:"1969-01-01",avatar:"",sharingEnabled:!0},this.healthData={bloodPressure:"130/85",bloodSugar:"6.2",heartRate:"78",temperature:"36.8"}}catch(e){console.error("加载成员信息失败:",e),n({title:"加载失败",icon:"none"})}finally{this.loading=!1}},async toggleSharing(e){try{0===(await k({memberId:this.memberId,enabled:e.detail.value,sharedData:["health","medication","appointment"]})).code&&(this.memberInfo.sharingEnabled=e.detail.value,n({title:this.memberInfo.sharingEnabled?"已开启共享":"已关闭共享",icon:"success"}))}catch(a){n({title:"设置失败",icon:"none"})}},editMember(){m({url:`/pages/family/add?id=${this.memberId}`})},deleteMember(){l({title:"确认删除",content:`确定要删除家庭成员 ${this.memberInfo.name} 吗？此操作不可恢复。`,confirmColor:"#ff6b6b",success:async e=>{if(e.confirm)try{s({title:"删除中..."});const e=await y(this.memberId);0===e.code?(n({title:"删除成功",icon:"success"}),setTimeout((()=>{r()}),1500)):n({title:e.message||"删除失败",icon:"none"})}catch(a){console.error("删除成员失败:",a),n({title:"删除失败",icon:"none"})}finally{d()}}})}}},[["render",function(e,l,s,n,r,d){const m=i("page-header"),v=f,y=_,k=o,C=I,D=p;return c(),a(k,{class:"container"},{default:t((()=>[h(m,{title:"家庭成员详情"}),h(k,{class:"content"},{default:t((()=>[h(k,{class:"member-info-section"},{default:t((()=>[h(k,{class:"member-header"},{default:t((()=>[h(k,{class:"member-avatar"},{default:t((()=>[r.memberInfo.avatar?(c(),a(y,{key:1,src:r.memberInfo.avatar,class:"avatar-image"},null,8,["src"])):(c(),a(v,{key:0},{default:t((()=>[u(b(r.memberInfo.name?r.memberInfo.name.charAt(0):"M"),1)])),_:1}))])),_:1}),h(k,{class:"member-details"},{default:t((()=>[h(v,{class:"member-name"},{default:t((()=>[u(b(r.memberInfo.name),1)])),_:1}),h(v,{class:"member-relation"},{default:t((()=>[u(b(r.memberInfo.relationship),1)])),_:1}),r.memberInfo.phoneNumber?(c(),a(v,{key:0,class:"member-phone"},{default:t((()=>[u(b(r.memberInfo.phoneNumber),1)])),_:1})):g("",!0)])),_:1})])),_:1}),h(k,{class:"member-stats"},{default:t((()=>[h(k,{class:"stat-item"},{default:t((()=>[h(v,{class:"stat-value"},{default:t((()=>[u(b(r.memberInfo.age||"--"),1)])),_:1}),h(v,{class:"stat-label"},{default:t((()=>[u("年龄")])),_:1})])),_:1}),h(k,{class:"stat-item"},{default:t((()=>[h(v,{class:"stat-value"},{default:t((()=>[u(b(r.memberInfo.gender||"--"),1)])),_:1}),h(v,{class:"stat-label"},{default:t((()=>[u("性别")])),_:1})])),_:1}),h(k,{class:"stat-item"},{default:t((()=>[h(v,{class:"stat-value"},{default:t((()=>[u(b(r.memberInfo.birthday||"--"),1)])),_:1}),h(v,{class:"stat-label"},{default:t((()=>[u("生日")])),_:1})])),_:1})])),_:1})])),_:1}),h(k,{class:"health-data-section"},{default:t((()=>[h(k,{class:"section-title"},{default:t((()=>[u("健康数据")])),_:1}),h(k,{class:"health-grid"},{default:t((()=>[h(k,{class:"health-item"},{default:t((()=>[h(v,{class:"health-label"},{default:t((()=>[u("血压")])),_:1}),h(v,{class:"health-value"},{default:t((()=>[u(b(r.healthData.bloodPressure||"--"),1)])),_:1})])),_:1}),h(k,{class:"health-item"},{default:t((()=>[h(v,{class:"health-label"},{default:t((()=>[u("血糖")])),_:1}),h(v,{class:"health-value"},{default:t((()=>[u(b(r.healthData.bloodSugar||"--"),1)])),_:1})])),_:1}),h(k,{class:"health-item"},{default:t((()=>[h(v,{class:"health-label"},{default:t((()=>[u("心率")])),_:1}),h(v,{class:"health-value"},{default:t((()=>[u(b(r.healthData.heartRate||"--"),1)])),_:1})])),_:1}),h(k,{class:"health-item"},{default:t((()=>[h(v,{class:"health-label"},{default:t((()=>[u("体温")])),_:1}),h(v,{class:"health-value"},{default:t((()=>[u(b(r.healthData.temperature||"--"),1)])),_:1})])),_:1})])),_:1})])),_:1}),h(k,{class:"sharing-section"},{default:t((()=>[h(k,{class:"section-title"},{default:t((()=>[u("数据共享设置")])),_:1}),h(k,{class:"sharing-item"},{default:t((()=>[h(v,{class:"sharing-label"},{default:t((()=>[u("健康数据共享")])),_:1}),h(C,{checked:r.memberInfo.sharingEnabled,onChange:d.toggleSharing,color:"#6C63FF"},null,8,["checked","onChange"])])),_:1}),h(k,{class:"sharing-desc"},{default:t((()=>[h(v,null,{default:t((()=>[u(b(r.memberInfo.sharingEnabled?"已开启数据共享":"未开启数据共享"),1)])),_:1})])),_:1})])),_:1}),h(k,{class:"action-section"},{default:t((()=>[h(D,{class:"action-btn edit-btn",onClick:d.editMember},{default:t((()=>[h(v,null,{default:t((()=>[u("编辑信息")])),_:1})])),_:1},8,["onClick"]),h(D,{class:"action-btn delete-btn",onClick:d.deleteMember},{default:t((()=>[h(v,null,{default:t((()=>[u("删除成员")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-1b8743d5"]]);export{C as default};
