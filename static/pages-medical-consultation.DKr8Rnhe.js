import{_ as e,c as t,w as s,a,d as l,x as o,h as c,y as n,i as d,r as i,o as m,e as u,m as r,p as f,j as p,k as y,u as _,F as h,v as g,t as D,z as I,K as C,D as k,f as v,q as x}from"./js/index.DiTfkHc-.js";import{P as b}from"./PageHeader.Bk91XqsU.js";const T=e({components:{PageHeader:b},data:()=>({selectedType:"text",selectedDepartment:"",selectedDoctor:"",departments:[],doctors:[],durationIndex:-1,durationOptions:["1-3天","3-7天","1-2周","2-4周","1-3个月","3个月以上"],symptomInfo:{mainSymptom:"",duration:"",hasAllergy:!1,allergyDetails:"",images:[]}}),computed:{selectedDoctorInfo(){return this.doctors.find((e=>e.id===this.selectedDoctor))},isFormComplete(){return this.selectedDepartment&&this.selectedDoctor&&this.symptomInfo.mainSymptom.trim()}},onLoad(){this.loadDepartments()},methods:{selectType(e){this.selectedType=e},async loadDepartments(){this.departments=[{id:"1",name:"内科",icon:"🏥",desc:"内科疾病"},{id:"2",name:"外科",icon:"🔪",desc:"外科疾病"},{id:"3",name:"妇产科",icon:"👶",desc:"妇科产科"},{id:"4",name:"儿科",icon:"👶",desc:"儿童疾病"},{id:"5",name:"皮肤科",icon:"🦠",desc:"皮肤病"},{id:"6",name:"眼科",icon:"👁️",desc:"眼部疾病"},{id:"7",name:"骨科",icon:"🦴",desc:"骨科疾病"},{id:"8",name:"心理科",icon:"🧠",desc:"心理健康"}]},async selectDepartment(e){this.selectedDepartment=e.id,this.selectedDoctor="",await this.loadDoctors()},async loadDoctors(){this.doctors=[{id:"1",name:"张医生",title:"主任医师",hospital:"北京协和医院",specialty:"心血管疾病",rating:4.8,consultationCount:1250,responseRate:98,fee:50},{id:"2",name:"李医生",title:"副主任医师",hospital:"北京大学第一医院",specialty:"消化系统疾病",rating:4.6,consultationCount:980,responseRate:95,fee:40},{id:"3",name:"王医生",title:"主治医师",hospital:"清华大学附属医院",specialty:"呼吸系统疾病",rating:4.5,consultationCount:750,responseRate:92,fee:30}]},selectDoctor(e){this.selectedDoctor=e.id},onDurationChange(e){this.durationIndex=e.detail.value,this.symptomInfo.duration=this.durationOptions[this.durationIndex]},onAllergyChange(e){this.symptomInfo.hasAllergy=e.detail.value,this.symptomInfo.hasAllergy||(this.symptomInfo.allergyDetails="")},chooseImage(){n({count:6-this.symptomInfo.images.length,sizeType:["compressed"],sourceType:["album","camera"],success:e=>{this.symptomInfo.images=[...this.symptomInfo.images,...e.tempFilePaths]}})},deleteImage(e){this.symptomInfo.images.splice(e,1)},async submitConsultation(){if(this.isFormComplete)try{l({title:"提交中..."});this.selectedType,this.selectedDepartment,this.selectedDoctor,this.symptomInfo;a({title:"提交成功",icon:"success"}),setTimeout((()=>{o()}),1500)}catch(e){console.error("提交问诊失败:",e),a({title:"提交失败",icon:"none"})}finally{c()}else a({title:"请完善问诊信息",icon:"none"})}}},[["render",function(e,a,l,o,c,n){const b=i("page-header"),T=p,A=d,F=I,V=C,j=k,S=v,O=x;return m(),t(A,{class:"container"},{default:s((()=>[u(b,{title:"在线问诊"}),u(A,{class:"content"},{default:s((()=>[u(A,{class:"consultation-types"},{default:s((()=>[u(A,{class:f(["type-item",{active:"text"===c.selectedType}]),onClick:a[0]||(a[0]=e=>n.selectType("text"))},{default:s((()=>[u(T,{class:"type-icon"},{default:s((()=>[y("💬")])),_:1}),u(T,{class:"type-name"},{default:s((()=>[y("图文问诊")])),_:1}),u(T,{class:"type-desc"},{default:s((()=>[y("文字描述症状")])),_:1})])),_:1},8,["class"]),u(A,{class:f(["type-item",{active:"voice"===c.selectedType}]),onClick:a[1]||(a[1]=e=>n.selectType("voice"))},{default:s((()=>[u(T,{class:"type-icon"},{default:s((()=>[y("🎤")])),_:1}),u(T,{class:"type-name"},{default:s((()=>[y("语音问诊")])),_:1}),u(T,{class:"type-desc"},{default:s((()=>[y("语音描述症状")])),_:1})])),_:1},8,["class"]),u(A,{class:f(["type-item",{active:"video"===c.selectedType}]),onClick:a[2]||(a[2]=e=>n.selectType("video"))},{default:s((()=>[u(T,{class:"type-icon"},{default:s((()=>[y("📹")])),_:1}),u(T,{class:"type-name"},{default:s((()=>[y("视频问诊")])),_:1}),u(T,{class:"type-desc"},{default:s((()=>[y("面对面交流")])),_:1})])),_:1},8,["class"])])),_:1}),u(A,{class:"section"},{default:s((()=>[u(A,{class:"section-title"},{default:s((()=>[y("选择科室")])),_:1}),u(A,{class:"department-list"},{default:s((()=>[(m(!0),_(h,null,g(c.departments,(e=>(m(),t(A,{class:f(["department-item",{active:c.selectedDepartment===e.id}]),key:e.id,onClick:t=>n.selectDepartment(e)},{default:s((()=>[u(T,{class:"department-icon"},{default:s((()=>[y(D(e.icon),1)])),_:2},1024),u(T,{class:"department-name"},{default:s((()=>[y(D(e.name),1)])),_:2},1024),u(T,{class:"department-desc"},{default:s((()=>[y(D(e.desc),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),c.selectedDepartment?(m(),t(A,{key:0,class:"section"},{default:s((()=>[u(A,{class:"section-title"},{default:s((()=>[y("选择医生")])),_:1}),u(A,{class:"doctor-list"},{default:s((()=>[(m(!0),_(h,null,g(c.doctors,(e=>(m(),t(A,{class:f(["doctor-item",{active:c.selectedDoctor===e.id}]),key:e.id,onClick:t=>n.selectDoctor(e)},{default:s((()=>[u(A,{class:"doctor-avatar"},{default:s((()=>[u(T,null,{default:s((()=>[y(D(e.name.charAt(0)),1)])),_:2},1024)])),_:2},1024),u(A,{class:"doctor-info"},{default:s((()=>[u(A,{class:"doctor-header"},{default:s((()=>[u(T,{class:"doctor-name"},{default:s((()=>[y(D(e.name),1)])),_:2},1024),u(T,{class:"doctor-title"},{default:s((()=>[y(D(e.title),1)])),_:2},1024)])),_:2},1024),u(T,{class:"doctor-hospital"},{default:s((()=>[y(D(e.hospital),1)])),_:2},1024),u(T,{class:"doctor-specialty"},{default:s((()=>[y(D(e.specialty),1)])),_:2},1024),u(A,{class:"doctor-stats"},{default:s((()=>[u(T,{class:"stat-item"},{default:s((()=>[y("评分 "+D(e.rating),1)])),_:2},1024),u(T,{class:"stat-item"},{default:s((()=>[y("接诊 "+D(e.consultationCount),1)])),_:2},1024),u(T,{class:"stat-item"},{default:s((()=>[y("回复率 "+D(e.responseRate)+"%",1)])),_:2},1024)])),_:2},1024)])),_:2},1024),u(A,{class:"doctor-fee"},{default:s((()=>[u(T,{class:"fee-amount"},{default:s((()=>[y("¥"+D(e.fee),1)])),_:2},1024),u(T,{class:"fee-unit"},{default:s((()=>[y("/次")])),_:1})])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})):r("",!0),c.selectedDoctor?(m(),t(A,{key:1,class:"section"},{default:s((()=>[u(A,{class:"section-title"},{default:s((()=>[y("症状描述")])),_:1}),u(A,{class:"symptom-form"},{default:s((()=>[u(A,{class:"form-item"},{default:s((()=>[u(T,{class:"form-label"},{default:s((()=>[y("主要症状")])),_:1}),u(F,{class:"form-textarea",modelValue:c.symptomInfo.mainSymptom,"onUpdate:modelValue":a[3]||(a[3]=e=>c.symptomInfo.mainSymptom=e),placeholder:"请详细描述您的主要症状...",maxlength:"500"},null,8,["modelValue"]),u(T,{class:"char-count"},{default:s((()=>[y(D(c.symptomInfo.mainSymptom.length)+"/500",1)])),_:1})])),_:1}),u(A,{class:"form-item"},{default:s((()=>[u(T,{class:"form-label"},{default:s((()=>[y("症状持续时间")])),_:1}),u(V,{class:"form-picker",value:c.durationIndex,range:c.durationOptions,onChange:n.onDurationChange},{default:s((()=>[u(A,{class:"picker-text"},{default:s((()=>[y(D(c.durationOptions[c.durationIndex]||"请选择持续时间"),1)])),_:1})])),_:1},8,["value","range","onChange"])])),_:1}),u(A,{class:"form-item"},{default:s((()=>[u(T,{class:"form-label"},{default:s((()=>[y("是否有过敏史")])),_:1}),u(j,{checked:c.symptomInfo.hasAllergy,onChange:n.onAllergyChange,color:"#6C63FF"},null,8,["checked","onChange"])])),_:1}),c.symptomInfo.hasAllergy?(m(),t(A,{key:0,class:"form-item"},{default:s((()=>[u(T,{class:"form-label"},{default:s((()=>[y("过敏史详情")])),_:1}),u(F,{class:"form-textarea",modelValue:c.symptomInfo.allergyDetails,"onUpdate:modelValue":a[4]||(a[4]=e=>c.symptomInfo.allergyDetails=e),placeholder:"请描述您的过敏史...",maxlength:"200"},null,8,["modelValue"])])),_:1})):r("",!0)])),_:1})])),_:1})):r("",!0),c.selectedDoctor?(m(),t(A,{key:2,class:"section"},{default:s((()=>[u(A,{class:"section-title"},{default:s((()=>[y("上传图片（可选）")])),_:1}),u(A,{class:"image-upload"},{default:s((()=>[u(A,{class:"upload-grid"},{default:s((()=>[(m(!0),_(h,null,g(c.symptomInfo.images,((e,a)=>(m(),t(A,{class:"upload-item",key:a},{default:s((()=>[u(S,{src:e,class:"uploaded-image"},null,8,["src"]),u(A,{class:"delete-btn",onClick:e=>n.deleteImage(a)},{default:s((()=>[y("×")])),_:2},1032,["onClick"])])),_:2},1024)))),128)),c.symptomInfo.images.length<6?(m(),t(A,{key:0,class:"upload-btn",onClick:n.chooseImage},{default:s((()=>[u(T,{class:"upload-icon"},{default:s((()=>[y("+")])),_:1}),u(T,{class:"upload-text"},{default:s((()=>[y("添加图片")])),_:1})])),_:1},8,["onClick"])):r("",!0)])),_:1}),u(T,{class:"upload-tip"},{default:s((()=>[y("最多可上传6张图片，支持jpg、png格式")])),_:1})])),_:1})])),_:1})):r("",!0),c.selectedDoctor?(m(),t(A,{key:3,class:"fee-section"},{default:s((()=>[u(A,{class:"fee-info"},{default:s((()=>[u(T,{class:"fee-label"},{default:s((()=>[y("问诊费用")])),_:1}),u(T,{class:"fee-amount"},{default:s((()=>{var e;return[y("¥"+D((null==(e=n.selectedDoctorInfo)?void 0:e.fee)||0),1)]})),_:1})])),_:1}),u(T,{class:"fee-desc"},{default:s((()=>[y("包含医生回复和后续3天内免费追问")])),_:1})])),_:1})):r("",!0),u(A,{class:"submit-section"},{default:s((()=>[u(O,{class:"submit-btn",disabled:!n.isFormComplete,onClick:n.submitConsultation},{default:s((()=>[u(T,null,{default:s((()=>[y("提交问诊")])),_:1})])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-3acb2d92"]]);export{T as default};
