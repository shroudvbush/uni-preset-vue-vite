import{_ as a,c as e,w as t,x as l,a as s,d as n,h as o,y as r,i,r as d,o as c,e as m,j as f,k as u,I as h,K as g,t as p,f as _,D as b,q as v}from"./js/index.DiTfkHc-.js";import{P as C}from"./PageHeader.Bk91XqsU.js";import{b as x}from"./family.4SulrOfU.js";import"./request.BnSz9hlZ.js";const D=a({components:{PageHeader:C},data:()=>({formData:{name:"",relationship:"",phoneNumber:"",gender:"",birthday:"",avatar:"",sharingEnabled:!0},relationIndex:-1,genderIndex:-1,relationOptions:["çˆ¶äº²","æ¯äº²","å„¿å­","å¥³å„¿","ä¸ˆå¤«","å¦»å­","ç¥–çˆ¶","ç¥–æ¯","å¤–ç¥–çˆ¶","å¤–ç¥–æ¯","å…¶ä»–"],genderOptions:["ç”·","å¥³"]}),computed:{isFormValid(){return this.formData.name.trim()&&this.formData.relationship}},methods:{onRelationChange(a){this.relationIndex=a.detail.value,this.formData.relationship=this.relationOptions[this.relationIndex]},onGenderChange(a){this.genderIndex=a.detail.value,this.formData.gender=this.genderOptions[this.genderIndex]},onBirthdayChange(a){this.formData.birthday=a.detail.value},onSharingChange(a){this.formData.sharingEnabled=a.detail.value},chooseAvatar(){r({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:a=>{this.formData.avatar=a.tempFilePaths[0]}})},async saveMember(){if(this.isFormValid)try{n({title:"ä¿å­˜ä¸­..."});const a=await x(this.formData);0===a.code?(s({title:"æ·»åŠ æˆåŠŸ",icon:"success"}),setTimeout((()=>{l()}),1500)):s({title:a.message||"æ·»åŠ å¤±è´¥",icon:"none"})}catch(a){console.error("æ·»åŠ å®¶åº­æˆå‘˜å¤±è´¥:",a),s({title:"æ·»åŠ å¤±è´¥",icon:"none"})}finally{o()}else s({title:"è¯·å¡«å†™å¿…å¡«é¡¹",icon:"none"})},cancel(){l()}}},[["render",function(a,l,s,n,o,r){const C=d("page-header"),x=f,D=h,k=i,y=g,I=_,V=b,O=v;return c(),e(k,{class:"container"},{default:t((()=>[m(C,{title:"æ·»åŠ å®¶åº­æˆå‘˜"}),m(k,{class:"content"},{default:t((()=>[m(k,{class:"form-section"},{default:t((()=>[m(k,{class:"form-item"},{default:t((()=>[m(x,{class:"form-label"},{default:t((()=>[u("å§“å *")])),_:1}),m(D,{class:"form-input",modelValue:o.formData.name,"onUpdate:modelValue":l[0]||(l[0]=a=>o.formData.name=a),placeholder:"è¯·è¾“å…¥å§“å",maxlength:"20"},null,8,["modelValue"])])),_:1}),m(k,{class:"form-item"},{default:t((()=>[m(x,{class:"form-label"},{default:t((()=>[u("å…³ç³» *")])),_:1}),m(y,{class:"form-picker",value:o.relationIndex,range:o.relationOptions,onChange:r.onRelationChange},{default:t((()=>[m(k,{class:"picker-text"},{default:t((()=>[u(p(o.relationOptions[o.relationIndex]||"è¯·é€‰æ‹©å…³ç³»"),1)])),_:1})])),_:1},8,["value","range","onChange"])])),_:1}),m(k,{class:"form-item"},{default:t((()=>[m(x,{class:"form-label"},{default:t((()=>[u("æ‰‹æœºå·")])),_:1}),m(D,{class:"form-input",modelValue:o.formData.phoneNumber,"onUpdate:modelValue":l[1]||(l[1]=a=>o.formData.phoneNumber=a),placeholder:"è¯·è¾“å…¥æ‰‹æœºå·",type:"number",maxlength:"11"},null,8,["modelValue"])])),_:1}),m(k,{class:"form-item"},{default:t((()=>[m(x,{class:"form-label"},{default:t((()=>[u("æ€§åˆ«")])),_:1}),m(y,{class:"form-picker",value:o.genderIndex,range:o.genderOptions,onChange:r.onGenderChange},{default:t((()=>[m(k,{class:"picker-text"},{default:t((()=>[u(p(o.genderOptions[o.genderIndex]||"è¯·é€‰æ‹©æ€§åˆ«"),1)])),_:1})])),_:1},8,["value","range","onChange"])])),_:1}),m(k,{class:"form-item"},{default:t((()=>[m(x,{class:"form-label"},{default:t((()=>[u("ç”Ÿæ—¥")])),_:1}),m(y,{class:"form-picker",mode:"date",value:o.formData.birthday,onChange:r.onBirthdayChange},{default:t((()=>[m(k,{class:"picker-text"},{default:t((()=>[u(p(o.formData.birthday||"è¯·é€‰æ‹©ç”Ÿæ—¥"),1)])),_:1})])),_:1},8,["value","onChange"])])),_:1}),m(k,{class:"form-item"},{default:t((()=>[m(x,{class:"form-label"},{default:t((()=>[u("å¤´åƒ")])),_:1}),m(k,{class:"avatar-upload",onClick:r.chooseAvatar},{default:t((()=>[o.formData.avatar?(c(),e(k,{key:0,class:"avatar-preview"},{default:t((()=>[m(I,{src:o.formData.avatar,class:"avatar-image"},null,8,["src"])])),_:1})):(c(),e(k,{key:1,class:"avatar-placeholder"},{default:t((()=>[m(x,{class:"avatar-icon"},{default:t((()=>[u("ğŸ“·")])),_:1}),m(x,{class:"avatar-text"},{default:t((()=>[u("ç‚¹å‡»ä¸Šä¼ å¤´åƒ")])),_:1})])),_:1}))])),_:1},8,["onClick"])])),_:1})])),_:1}),m(k,{class:"sharing-section"},{default:t((()=>[m(k,{class:"section-title"},{default:t((()=>[u("æ•°æ®å…±äº«è®¾ç½®")])),_:1}),m(k,{class:"sharing-item"},{default:t((()=>[m(x,{class:"sharing-label"},{default:t((()=>[u("å¥åº·æ•°æ®å…±äº«")])),_:1}),m(V,{checked:o.formData.sharingEnabled,onChange:r.onSharingChange,color:"#6C63FF"},null,8,["checked","onChange"])])),_:1}),m(k,{class:"sharing-desc"},{default:t((()=>[m(x,null,{default:t((()=>[u("å¼€å¯åï¼Œè¯¥å®¶åº­æˆå‘˜å¯ä»¥æŸ¥çœ‹æ‚¨çš„å¥åº·æ•°æ®")])),_:1})])),_:1})])),_:1}),m(k,{class:"action-buttons"},{default:t((()=>[m(O,{class:"action-btn cancel-btn",onClick:r.cancel},{default:t((()=>[u("å–æ¶ˆ")])),_:1},8,["onClick"]),m(O,{class:"action-btn confirm-btn",onClick:r.saveMember,disabled:!r.isFormValid},{default:t((()=>[u(" ä¿å­˜ ")])),_:1},8,["onClick","disabled"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-31f06755"]]);export{D as default};
