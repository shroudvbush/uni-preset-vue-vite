import{_ as a,c as e,w as s,a as t,h as n,C as i,s as l,A as d,B as o,m as u,v as c,i as h,o as r,d as b,f as m,g as f,I as _,l as p,u as g,D as k}from"./index-B_XG-FMA.js";const N=a({data:()=>({phoneNumber:"",maskedPhoneNumber:"",isBound:!1,isDataShareEnabled:!1}),computed:{isValidPhone(){return/^1\d{10}$/.test(this.phoneNumber)}},onLoad(){const a=u("boundGuardian");if(a){const e=JSON.parse(a);this.maskedPhoneNumber=e.maskedPhone,this.isBound=!0,this.isDataShareEnabled=e.isDataShareEnabled||!1}},methods:{goBack(){c()},toggleDataShare(a){if(this.isDataShareEnabled=a.detail.value,this.isBound){const a=u("boundGuardian");if(a){const e=JSON.parse(a);e.isDataShareEnabled=this.isDataShareEnabled,o("boundGuardian",JSON.stringify(e))}}},maskPhoneNumber:a=>a&&11===a.length?a.substring(0,3)+"****"+a.substring(7):"",bindGuardian(){this.isValidPhone?(t({title:"绑定中..."}),setTimeout((()=>{n();const a=this.maskPhoneNumber(this.phoneNumber),e={phone:this.phoneNumber,maskedPhone:a,isDataShareEnabled:this.isDataShareEnabled,bindTime:(new Date).getTime()};o("boundGuardian",JSON.stringify(e)),this.maskedPhoneNumber=a,this.isBound=!0,l({title:"绑定成功",icon:"success"})}),1500)):l({title:"请输入正确的手机号",icon:"none"})},showUnbindConfirm(){d({title:"提示",content:"确定要解除监护人绑定吗？",success:a=>{a.confirm&&this.unbindGuardian()}})},unbindGuardian(){t({title:"解绑中..."}),setTimeout((()=>{n(),i("boundGuardian"),this.phoneNumber="",this.maskedPhoneNumber="",this.isBound=!1,l({title:"已解除绑定",icon:"success"})}),1e3)}}},[["render",function(a,t,n,i,l,d){const o=m,u=h,c=_,N=p,S=k;return r(),e(u,{class:"container"},{default:s((()=>[b(u,{class:"header"},{default:s((()=>[b(u,{class:"back-button",onClick:d.goBack},{default:s((()=>[b(o,{class:"back-icon"},{default:s((()=>[f("←")])),_:1})])),_:1},8,["onClick"]),b(o,{class:"page-title"},{default:s((()=>[f("监护人绑定")])),_:1}),b(u,{class:"header-placeholder"})])),_:1}),b(u,{class:"content"},{default:s((()=>[l.isBound?(r(),e(u,{key:1},{default:s((()=>[b(u,{class:"bound-info"},{default:s((()=>[b(o,{class:"bound-title"},{default:s((()=>[f("※已绑定监护人")])),_:1}),b(u,{class:"bound-phone"},{default:s((()=>[b(o,{class:"phone-text"},{default:s((()=>[f(g(l.maskedPhoneNumber),1)])),_:1}),b(u,{class:"delete-icon",onClick:d.showUnbindConfirm},{default:s((()=>[f("✕")])),_:1},8,["onClick"])])),_:1})])),_:1}),b(u,{class:"description"},{default:s((()=>[b(o,{class:"desc-text"},{default:s((()=>[f("说明：完成与监护人绑定后，便可以使用监护人紧急呼叫功能。")])),_:1})])),_:1})])),_:1})):(r(),e(u,{key:0},{default:s((()=>[b(u,{class:"section"},{default:s((()=>[b(o,{class:"label"},{default:s((()=>[f("监护人联系方式")])),_:1}),b(c,{class:"input-field",type:"number",placeholder:"请输入监护人手机号",modelValue:l.phoneNumber,"onUpdate:modelValue":t[0]||(t[0]=a=>l.phoneNumber=a),maxlength:"11"},null,8,["modelValue"])])),_:1}),b(u,{class:"action-button-area"},{default:s((()=>[b(N,{class:"bind-button",onClick:d.bindGuardian,disabled:!d.isValidPhone},{default:s((()=>[f("绑定")])),_:1},8,["onClick","disabled"])])),_:1}),b(u,{class:"description"},{default:s((()=>[b(o,{class:"desc-text"},{default:s((()=>[f("说明：完成与监护人绑定后，便可以使用监护人视频通话功能。")])),_:1})])),_:1})])),_:1})),b(u,{class:"toggle-section"},{default:s((()=>[b(o,{class:"toggle-label"},{default:s((()=>[f("健康数据共享")])),_:1}),b(S,{checked:l.isDataShareEnabled,onChange:d.toggleDataShare,color:"#6C63FF",class:"toggle-switch"},null,8,["checked","onChange"])])),_:1}),b(u,{class:"description"},{default:s((()=>[b(o,{class:"desc-text"},{default:s((()=>[f("说明：开启健康数据共享功能仅是在每次健康数据更新时提供给监护人，无论开关与否均可在健康数据异常、触发跌倒检测时第一时间通知监护人（已经绑定监护人时生效）")])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-a7b763a4"]]);export{N as default};
